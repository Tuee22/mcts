# =============================================================================
# Docker Environment Configuration for MCTS Project
# =============================================================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env:     cp .env.example .env
# 2. Choose ONE of the three configurations below and uncomment it
# 3. Run: docker compose up --build -d
#
# =============================================================================

# -----------------------------------------------------------------------------
# OPTION 1: CPU Build (AMD64/Intel - Default)
# -----------------------------------------------------------------------------
# Use this for regular x86_64/AMD64 systems without GPU requirements
# 
# COMPOSE_PROFILES=cpu
# CPU_BASE_IMAGE=ubuntu:22.04
# PORT=8000

# -----------------------------------------------------------------------------
# OPTION 2: CPU Build (ARM64 - Apple Silicon)
# -----------------------------------------------------------------------------
# Use this for Apple M1/M2/M3 Macs and other ARM64 systems
# 
# COMPOSE_PROFILES=cpu
# CPU_BASE_IMAGE=ubuntu:22.04
# PORT=8000

# -----------------------------------------------------------------------------
# OPTION 3: GPU Build (NVIDIA CUDA - AMD64 only)
# -----------------------------------------------------------------------------
# Use this for systems with NVIDIA GPUs and Docker with GPU support
# Requires: nvidia-docker runtime, compatible NVIDIA GPU, AMD64 architecture
#
# COMPOSE_PROFILES=gpu
# CUDA_BASE_IMAGE=nvidia/cuda:12.6.2-devel-ubuntu22.04
# GPU_COUNT=all
# NVIDIA_VISIBLE_DEVICES=all
# PORT=8000

# =============================================================================
# Advanced Configuration (Optional)
# =============================================================================

# Override default container command (uncomment to use)
# APP_COMMAND=python -m backend.api.server          # Start API server
# APP_COMMAND=bash -c "poetry run pytest -q || bash"  # Run tests then shell

# =============================================================================
# Usage Examples
# =============================================================================
#
# After copying and configuring .env:
#
# CPU (AMD64):     docker compose up --build -d && docker compose exec mcts bash
# CPU (ARM64):     docker compose up --build -d && docker compose exec mcts bash  
# GPU (NVIDIA):    docker compose up --build -d && docker compose exec mcts-gpu nvidia-smi
#
# Run tests:       docker compose exec mcts poetry run pytest -q
# GPU tests:       docker compose exec mcts-gpu poetry run pytest -q
# 
# =============================================================================

# Default fallback (CPU mode) - will be used if no profile is explicitly set
COMPOSE_PROFILES=cpu
CPU_BASE_IMAGE=ubuntu:22.04
PORT=8000